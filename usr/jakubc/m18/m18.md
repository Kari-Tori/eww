---
title: M18 â€” Platforma follow-me dla odkurzacza
color: blue
author: jakubc / Kari-Tori
created: 2025-11-14
updated: 2025-11-21
lang: pl
tags:
  - robotics
  - vacuum
  - packout
  - personal
  - blue
  - jakubc
links:
  - 
  - 
  - 
---

# ğŸ§ ğŸšš Projekt M18 â€” platforma mobilna follow-me

> [!summary|icon:target|color:#F94144]
> **Cel:** zbudowaÄ‡ moduÅ‚owÄ… platformÄ™ transportowÄ…, ktÃ³ra przewozi odkurzacz **MILWAUKEEÂ® M18 PACKOUTâ„¢ Wet/Dry** oraz dodatkowy kosz/Å‚adunek, podÄ…Å¼a za operatorem (â€follow-meâ€) i odciÄ…Å¼a go w zadaniach warsztatowych (zbieranie urobku, przenoszenie narzÄ™dzi).

> [!info|icon:truck|color:#F9844A]
> **Use-case:** robot 2WD z sensorami (ultradÅºwiÄ™ki/IR/LiDAR) jedzie w Å›lad za uÅ¼ytkownikiem, utrzymuje wÄ…Å¼ ssÄ…cy i kosz w zasiÄ™gu, zatrzymuje siÄ™ przy krawÄ™dziach, a w trybie â€parkingâ€ blokuje siÄ™ w systemie PACKOUTâ„¢ i podaje zasilanie akcesoriom.

## ğŸ§± PACKOUT form-factor i kosz

> [!abstract|icon:cube|color:#277DA1]
> - Obrys platformy â‰¤ obrys M18 FPOVCL-0 â†’ peÅ‚na kompatybilnoÅ›Ä‡ PACKOUTâ„¢ (sztaplowanie, spinanie pasami).  
> - Mocowanie 3D (`hw/packout_mount.scad`): PETG/ABS rekomendowane, PLA tylko na prototypy. UÅ¼yj heat-set inserts M4 lub stalowych nakrÄ™tek.  
> - Sloty na kosz na odpady oraz skrzynki PACKOUT; przewidziane punkty montaÅ¼owe na dodatkowe moduÅ‚y (czujniki, uchwyty narzÄ™dzi).  
> - Tolerancje druku 2â€“5â€¯mm dla zaczepÃ³w PACKOUT i prowadzeÅ„ kosza.

## âš™ï¸ NapÄ™d i sterowanie

> [!tip|icon:gear|color:#90BE6D]
> - **Opcje:**  
>   â€¢ Brushed DC gearmotors + enkodery â€” prostota, niski koszt, Å‚atwe PWM.  
>   â€¢ BLDC + ESC/VESC â€” wiÄ™ksza sprawnoÅ›Ä‡, bardziej zÅ‚oÅ¼one sterowanie.  
>   â€¢ Planetary gearbox â€” wysoki moment i trwaÅ‚oÅ›Ä‡.  
> - **Rekomendacja startowa:** 2Ã— brushed DC gearmotor 12â€“18â€¯V z enkoderem + sterownik VNH5019 (lub Sabertooth 2x12).  
> - KÃ³Å‚ko podporowe dla stabilnoÅ›ci + ogranicznik prÄ™dkoÅ›ci (edge safety).  
> - Przewidziane Eâ€‘STOP (fizyczny) i watchdog w MCU.

## ğŸ§  Architektura sterowania

> [!info|icon:diagram-project|color:#577590]
> - **MCU Layer (ESP32/STM32):** PWM, enkodery, czujniki krawÄ™dzi, kontrola ssania, watchdog.  
> - **SBC Layer (Raspberry Pi Zero 2â€¯W / Piâ€¯4 / Jetson):** algorytm follow-me, UI, logika wyÅ¼szego poziomu.  
> - **Komunikacja:** UART/Serial (ASCII/JSON) + ewentualnie MQTT dla telemetrii.  
> - **Panel operatorski:** prosty HTTP/GUI do zmiany trybÃ³w, kalibracji sensorÃ³w i podglÄ…du telemetrii.

## ğŸ‘€ Sensory â€” MVP â†’ docelowo

> [!example|icon:radar|color:#4D908E]
> - **MVP:**  
>   â€¢ Enkodery na obu koÅ‚ach (odometry).  
>   â€¢ 2â€“4Ã— HCâ€‘SR04 (ultradÅºwiÄ™ki) do omijania przeszkÃ³d.  
>   â€¢ 4Ã— czujniki krawÄ™dzi IR (cliff).  
>   â€¢ IMU (MPU6050) opcjonalnie.  
> - **Docelowo:** LiDAR (RPLIDAR / SLAMTEC) lub kamera + ML, radar mmWave dla trudnych warunkÃ³w, moduÅ‚ wizyjny do Å›ledzenia operatora.

## ğŸ”‹ Zasilanie i elektronika

> [!warning|icon:battery|color:#F8961E]
> - Integracja z akumulatorami M18 (18â€¯V nominal).  
> - Buck DC/DC 18â€¯â†’â€¯5â€¯V dla SBC, 18â€¯â†’â€¯5â€¯V/3.3â€¯V dla MCU/sensorÃ³w; osobna linia dla drivera silnikÃ³w.  
> - Monitorowanie napiÄ™cia akumulatora (ADC lub REDLINK, jeÅ›li dostÄ™pny).  
> - Drivery: VNH5019, BTS7960 lub Sabertooth 2x12 (zaleÅ¼nie od prÄ…du).  
> - Zabezpieczenia: termiczne, przeciwprzepiÄ™ciowe, szybkie odÅ‚Ä…czenie akumulatora.

## ğŸ§¾ ProtokÃ³Å‚ i interfejs

> [!info|icon:plug|color:#4895EF]
> - Komendy ASCII: `DRIVE L=<val> R=<val>` (âˆ’100â€¦100), `MODE MANUAL|FOLLOW`, `VAC ON/OFF`.  
> - Telemetria JSON (przykÅ‚ad): `{"v":0.2,"battery":16.4,"mode":"FOLLOW"}`.  
> - Panel operatorski HTTP do podglÄ…du i konfiguracji (profil follow-me, prÄ™dkoÅ›ci, stref bezpieczeÅ„stwa).

## ğŸ§ª Testy i walidacja

> [!info|icon:flask|color:#48CAE4]
> - **Mechanika:** test noÅ›noÅ›ci (5â€“10â€¯kg), test dynamiczny z M18 + kosz.  
> - **Elektronika:** pomiary prÄ…du rozruchowego, testy termiczne driverÃ³w, skutecznoÅ›Ä‡ Eâ€‘STOP.  
> - **Integracja:** symulator MCUâ†”SBC, prÃ³by manual_control, POC follow-me w warsztacie (rÃ³Å¼ne podÅ‚oÅ¼a).  
> - **Energia:** planowany skrypt `scripts/m18-power-test.sh` do logowania zuÅ¼ycia.

## ğŸ“¦ Minimalny BOM (iteracja 0)

| Element | Status | Notatki |
| --- | --- | --- |
| Silniki DC 12â€“18â€¯V z enkoderem (Ã—2) | wybrane | dobierz wg masy/prÄ™dkoÅ›ci |
| Driver VNH5019 / Sabertooth 2x12 | wybrane | zaleÅ¼nie od prÄ…dÃ³w |
| MCU ESP32 devkit | wybrane | zapewnia Wiâ€‘Fi/BLE, PWM |
| SBC Raspberry Pi Zero 2â€¯W / Piâ€¯4 | TBD | zaleÅ¼nie od obciÄ…Å¼enia ML |
| Sensory HCâ€‘SR04 (Ã—3), czujniki IR (Ã—4), MPU6050 | prototyp | docelowo LiDAR + radar |
| MateriaÅ‚y PACKOUT mount | w toku | PETG + insert M4 |
| Kosz + osprzÄ™t montaÅ¼owy | TBD | dopasowaÄ‡ do PACKOUT |

## âœ… Decyzje do potwierdzenia

> [!tip|icon:checklist|color:#2EC4B6]
> - Architektura: **ESP32-only** czy **ESP32 + Pi Zero 2â€¯W / Piâ€¯4**?  
> - Typ napÄ™du: **Brushed DC**, **BLDC** czy **planetary gearbox**?  
> - MateriaÅ‚ mocowania: **PETG** czy **PLA** (testy)?  
> - Docelowa masa platformy (kg) i prÄ™dkoÅ›Ä‡ (m/s) â†’ determinuje dobÃ³r silnikÃ³w i driverÃ³w.

## ğŸ”œ Kolejne kroki po potwierdzeniu

> [!info|icon:rocket|color:#8338EC]
> - Przy potwierdzeniu architektury i napÄ™du: przygotujÄ™ szczegÃ³Å‚owy `hw/BOM.md` z numerami katalogowymi i parametryczny model OpenSCAD (`hw/packout_mount.scad` + STL).  
> - OpracujÄ™ szkic protokoÅ‚u UART, parser w firmware (MCU) oraz klienta po stronie SBC.  
> - Dodam checklistÄ™ testÃ³w mechanicznych i terenowych oraz log zuÅ¼ycia energii.

## ğŸ”— PowiÄ…zane dokumenty

- [[usr/jakubc/m18/m18|m18]]
- [[usr/jakubc/jakubc|jakubc]]
- [[docs/INDEX|INDEX]]

---
**Auto-linked:** 2025-11-21
